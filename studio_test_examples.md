# LangGraph Studio æµ‹è¯•ç¤ºä¾‹

## ğŸš€ åœ¨ LangGraph Studio ä¸­æµ‹è¯•æ™ºèƒ½è¿ç»´ä»£ç†

### å¯åŠ¨æœåŠ¡å™¨
ä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼š
```bash
./scripts/start_server.sh
```

æˆ–æ‰‹åŠ¨å¯åŠ¨ï¼š
```bash
source .venv/bin/activate
langgraph dev --port 2024 --host 127.0.0.1 --no-browser
```

### è®¿é—® Studio UI
Studio URL: https://smith.langchain.com/studio/?baseUrl=http://127.0.0.1:2024

### å¯ç”¨çš„å›¾
ç°åœ¨æœ‰ä¸¤ä¸ªç‹¬ç«‹çš„å›¾å¯ä¾›é€‰æ‹©ï¼š
- **`ops-workflow`** - åº•å±‚å·¥ä½œæµå›¾ï¼ˆå®Œæ•´çš„è¿ç»´æµç¨‹ï¼‰
- **`ops-agent`** - é«˜å±‚æ™ºèƒ½ä½“å›¾ï¼ˆä»»åŠ¡å¯¼å‘çš„æ™ºèƒ½å¤„ç†ï¼‰

æ¨èä½¿ç”¨ `ops-agent` è¿›è¡Œäº¤äº’å¼æµ‹è¯•ã€‚

## ğŸ“‹ æµ‹è¯•ç¤ºä¾‹

### 1. ç”ŸæˆæŠ¥å‘Šæµ‹è¯•

**è¾“å…¥**:
```json
{
  "incident_id": "test_001",
  "description": "æµ‹è¯•æ™ºèƒ½ä½“æŠ¥å‘Šç”ŸæˆåŠŸèƒ½",
  "test_data": {
    "timestamp": "2025-01-09T10:30:00Z",
    "source": "studio_test"
  }
}
```

**é¢„æœŸè¾“å‡º**: æ™ºèƒ½ä½“ç”Ÿæˆçš„äº‹ä»¶æŠ¥å‘Šï¼ŒåŒ…å«åˆ†æã€è¯Šæ–­ã€è¡ŒåŠ¨è®¡åˆ’ç­‰ä¿¡æ¯ã€‚

---

### 2. å‘Šè­¦å¤„ç†æµ‹è¯•

**è¾“å…¥ (AlertInfo æ ¼å¼)**:
```json
{
  "alert_id": "cpu_high_001",
  "timestamp": "2025-01-09T10:30:00Z",
  "severity": "high",
  "source": "monitoring_system",
  "message": "CPU usage exceeds 85% for 5 minutes",
  "metrics": {
    "cpu_usage": 0.87,
    "memory_usage": 0.65,
    "load_average": 3.2
  },
  "tags": ["cpu", "performance", "critical"]
}
```

**é¢„æœŸè¾“å‡º**: å‘Šè­¦åˆ†æç»“æœï¼ŒåŒ…æ‹¬ä¼˜å…ˆçº§ã€åˆ†ç±»ã€ç´§æ€¥ç¨‹åº¦è¯„åˆ†ã€æ ¹å› æç¤ºå’Œå»ºè®®è¡ŒåŠ¨ã€‚

---

### 3. é—®é¢˜è¯Šæ–­æµ‹è¯•

**è¾“å…¥**:
```json
{
  "symptoms": [
    "æ•°æ®åº“è¿æ¥è¶…æ—¶",
    "APIå“åº”ç¼“æ…¢",
    "å†…å­˜ä½¿ç”¨ç‡æŒç»­ä¸Šå‡"
  ],
  "context": {
    "system_metrics": {
      "cpu_usage": 0.75,
      "memory_usage": 0.85,
      "disk_io": "high"
    },
    "log_entries": [
      "Connection pool exhausted",
      "Slow query detected",
      "Memory leak in process X"
    ],
    "topology_info": {
      "services": ["web", "api", "database"],
      "dependencies": {
        "web": ["api"],
        "api": ["database"]
      }
    }
  }
}
```

**é¢„æœŸè¾“å‡º**: è¯¦ç»†çš„è¯Šæ–­ç»“æœï¼ŒåŒ…æ‹¬æ ¹å› åˆ†æã€ç½®ä¿¡åº¦ã€å½±å“è¯„ä¼°ã€å—å½±å“ç»„ä»¶ã€ä¸šåŠ¡å½±å“ç­‰ã€‚

---

### 4. è¡ŒåŠ¨è§„åˆ’æµ‹è¯•

**è¾“å…¥**:
```json
{
  "diagnostic_result": {
    "root_cause": "æ•°æ®åº“è¿æ¥æ± è€—å°½",
    "confidence_score": 0.85,
    "impact_assessment": "high",
    "business_impact": "ç”¨æˆ·æ— æ³•è®¿é—®æœåŠ¡",
    "recovery_estimate": "15åˆ†é’Ÿ",
    "affected_components": ["database", "api"],
    "evidence": ["è¿æ¥æ± ç›‘æ§æŒ‡æ ‡", "é”™è¯¯æ—¥å¿—"]
  },
  "context": {
    "environment": "production",
    "maintenance_window": false,
    "auto_scaling": true
  }
}
```

**é¢„æœŸè¾“å‡º**: è¯¦ç»†çš„è¡ŒåŠ¨è®¡åˆ’ï¼ŒåŒ…æ‹¬æ‰§è¡Œæ­¥éª¤ã€é£é™©è¯„ä¼°ã€æ—¶é—´é¢„ä¼°ã€å›æ»šè®¡åˆ’ç­‰ã€‚

## ğŸ”§ é«˜çº§æµ‹è¯•åœºæ™¯

### åœºæ™¯ 1: å®Œæ•´çš„äº‹ä»¶å¤„ç†æµç¨‹

1. **æ­¥éª¤ 1**: æäº¤å‘Šè­¦
```
{"alert_id": "web_down_001", "severity": "critical", "message": "WebæœåŠ¡æ— å“åº”"}
```

2. **æ­¥éª¤ 2**: è·å–çŠ¶æ€æ£€æŸ¥ç»“æœ
```
status
```

3. **æ­¥éª¤ 3**: è¿›è¡Œé—®é¢˜è¯Šæ–­
```json
{
  "symptoms": ["WebæœåŠ¡æ— å“åº”", "è´Ÿè½½å‡è¡¡å™¨æŠ¥é”™"],
  "context": {"environment": "production"}
}
```

4. **æ­¥éª¤ 4**: åˆ¶å®šè¡ŒåŠ¨è®¡åˆ’
```json
{
  "diagnostic_result": {
    "root_cause": "WebæœåŠ¡å™¨è¿›ç¨‹å´©æºƒ",
    "confidence_score": 0.9,
    "impact_assessment": "critical"
  },
  "system_context": {"environment": "production"}
}
```

### åœºæ™¯ 2: æ€§èƒ½é—®é¢˜åˆ†æ

**è¾“å…¥**:
```json
{
  "alert_id": "perf_degradation_001",
  "severity": "medium",
  "source": "apm_system",
  "message": "APIå“åº”æ—¶é—´å¢åŠ 300%",
  "metrics": {
    "response_time": 1500,
    "throughput": 50,
    "error_rate": 0.05
  },
  "tags": ["performance", "api", "latency"]
}
```

### åœºæ™¯ 3: èµ„æºä¸è¶³å‘Šè­¦

**è¾“å…¥**:
```json
{
  "alert_id": "resource_low_001", 
  "severity": "high",
  "source": "infrastructure_monitoring",
  "message": "ç£ç›˜ç©ºé—´ä¸è¶³ï¼Œå‰©ä½™ç©ºé—´å°äº10%",
  "metrics": {
    "disk_usage": 0.92,
    "free_space": "2.1GB",
    "inode_usage": 0.87
  },
  "tags": ["disk", "storage", "capacity"]
}
```

## ğŸ“Š é¢„æœŸçš„å›¾æ‰§è¡Œæµç¨‹

åœ¨ LangGraph Studio ä¸­ï¼Œæ‚¨å°†çœ‹åˆ°ä»¥ä¸‹èŠ‚ç‚¹æ‰§è¡Œï¼š

### ops-agent å›¾ï¼ˆæ¨èæµ‹è¯•ï¼‰:
1. **initialize** - åˆå§‹åŒ–æ™ºèƒ½ä½“çŠ¶æ€
2. **route_task** - æ ¹æ®ä»»åŠ¡ç±»å‹è·¯ç”±
3. **ä»»åŠ¡æ‰§è¡ŒèŠ‚ç‚¹** - æ‰§è¡Œå…·ä½“åŠŸèƒ½
   - `process_alert` - å‘Šè­¦å¤„ç†
   - `diagnose_issue` - é—®é¢˜è¯Šæ–­  
   - `plan_actions` - è¡ŒåŠ¨è§„åˆ’
   - `execute_actions` - æ‰§è¡Œè¡ŒåŠ¨
   - `generate_report` - ç”ŸæˆæŠ¥å‘Š
   - `learn_feedback` - å­¦ä¹ åé¦ˆ
4. **finalize** - å®Œæˆä»»åŠ¡å¹¶è¿”å›ç»“æœ

### ops-workflow å›¾ï¼ˆå®Œæ•´æµç¨‹ï¼‰:
1. **monitor_collect** - ç›‘æ§æ•°æ®æ”¶é›†
2. **alert_process** - å‘Šè­¦å¤„ç†
3. **fault_diagnose** - æ•…éšœè¯Šæ–­
4. **action_plan** - è¡ŒåŠ¨è§„åˆ’
5. **action_execute** - æ‰§è¡Œè¡ŒåŠ¨
6. **report_generate** - ç”ŸæˆæŠ¥å‘Š
7. **feedback_learn** - åé¦ˆå­¦ä¹ 

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **Studio è¿æ¥å¤±è´¥**
   - ç¡®è®¤æœåŠ¡å™¨åœ¨ç«¯å£ 2024 ä¸Šè¿è¡Œ
   - æ£€æŸ¥æµè§ˆå™¨æ˜¯å¦å…è®¸ HTTPS è®¿é—® HTTP æœ¬åœ°æœåŠ¡å™¨
   - å°è¯•ç›´æ¥è®¿é—® API æ–‡æ¡£: http://127.0.0.1:2024/docs

2. **æ™ºèƒ½ä½“æœªåˆå§‹åŒ–**
   - æ£€æŸ¥ `.env` æ–‡ä»¶ä¸­çš„ DEEPSEEK_API_KEY é…ç½®
   - ç¡®ä¿ç½‘ç»œè¿æ¥æ­£å¸¸

3. **JSON è§£æé”™è¯¯**
   - ç¡®ä¿ JSON æ ¼å¼æ­£ç¡®
   - ä½¿ç”¨åœ¨çº¿ JSON éªŒè¯å·¥å…·æ£€æŸ¥

4. **æ¨¡å—å¯¼å…¥é”™è¯¯**
   - ç¡®ä¿é¡¹ç›®å·²å®‰è£…: `uv pip install -e .`
   - æ£€æŸ¥ä¾èµ–æ˜¯å¦å®Œæ•´

5. **å›¾é€‰æ‹©é”™è¯¯**
   - ç¡®è®¤é€‰æ‹©çš„å›¾å­˜åœ¨ï¼ˆops-agent æˆ– ops-workflowï¼‰
   - å¦‚æœçœ‹åˆ°å¤šä½™çš„å›¾ï¼ˆå¦‚ studio-ops-agentï¼‰ï¼Œè¯·é‡å¯æœåŠ¡å™¨

### è°ƒè¯•æŠ€å·§

1. **æŸ¥çœ‹è¯¦ç»†æ—¥å¿—**: åœ¨ Studio ä¸­è§‚å¯Ÿæ¯ä¸ªèŠ‚ç‚¹çš„çŠ¶æ€å˜åŒ–
2. **åˆ†æ­¥æµ‹è¯•**: å…ˆæµ‹è¯•ç®€å•çš„æŠ¥å‘Šç”Ÿæˆï¼Œå†æµ‹è¯•å¤æ‚åŠŸèƒ½
3. **æ£€æŸ¥é”™è¯¯æ¶ˆæ¯**: æ³¨æ„è¿”å›çš„ `errors` å­—æ®µå’ŒçŠ¶æ€ä¿¡æ¯
4. **ä½¿ç”¨ API æ–‡æ¡£**: ç›´æ¥åœ¨ http://127.0.0.1:2024/docs ä¸­æµ‹è¯•

## ğŸ¯ æµ‹è¯•ç›®æ ‡

é€šè¿‡è¿™äº›æµ‹è¯•ï¼Œæ‚¨å¯ä»¥éªŒè¯ï¼š

### åŒå±‚æ¶æ„éªŒè¯
- âœ… **ops-agent å›¾**: ä»»åŠ¡å¯¼å‘çš„æ™ºèƒ½ä½“è¡Œä¸º
- âœ… **ops-workflow å›¾**: å®Œæ•´çš„è¿ç»´æµç¨‹ç¼–æ’
- âœ… ä¸¤ä¸ªå›¾çš„ç‹¬ç«‹æ€§å’ŒåŠŸèƒ½å®Œæ•´æ€§

### æ ¸å¿ƒåŠŸèƒ½éªŒè¯
- âœ… æ™ºèƒ½ä½“åˆå§‹åŒ–å’ŒçŠ¶æ€ç®¡ç†
- âœ… å‘Šè­¦å¤„ç†å’Œåˆ†æèƒ½åŠ›
- âœ… é—®é¢˜è¯Šæ–­å’Œæ ¹å› åˆ†æ
- âœ… è¡ŒåŠ¨è§„åˆ’å’Œé£é™©è¯„ä¼°
- âœ… æŠ¥å‘Šç”Ÿæˆå’Œå­¦ä¹ åé¦ˆ
- âœ… é”™è¯¯å¤„ç†å’Œæ¢å¤æœºåˆ¶

### é›†æˆæµ‹è¯•
- âœ… DeepSeek LLM é›†æˆæ­£å¸¸
- âœ… DSPy æ¨¡å—åŠŸèƒ½æ­£ç¡®
- âœ… LangGraph å·¥ä½œæµæ‰§è¡Œç¨³å®š
- âœ… Studio ç•Œé¢äº¤äº’æµç•…

æˆåŠŸé€šè¿‡è¿™äº›æµ‹è¯•åï¼Œæ‚¨å°±å¯ä»¥ç¡®ä¿¡æ™ºèƒ½è¿ç»´ç³»ç»Ÿå·²ç»å‡†å¤‡å¥½åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨äº†ï¼

## ğŸš€ å¿«é€Ÿå¼€å§‹

1. å¯åŠ¨æœåŠ¡å™¨ï¼š`./scripts/start_server.sh`
2. è®¿é—® Studioï¼šhttps://smith.langchain.com/studio/?baseUrl=http://127.0.0.1:2024
3. é€‰æ‹© `ops-agent` å›¾
4. ä»æŠ¥å‘Šç”Ÿæˆæµ‹è¯•å¼€å§‹
5. é€æ­¥å°è¯•æ›´å¤æ‚çš„åŠŸèƒ½